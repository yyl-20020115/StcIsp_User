关于本项目


STC（宏晶）的15系列芯片，其中IAP类具有In-Application-Programming的能力。

也就是说，不用重新开机或者按复位按钮，就可以在应用程序中实现对自身程序的升级。

这对于那些需要反复烧录以测试程序的工程师们特别有用，而且对于那些部署于远程，

需要产品在运行过程中升级而且无法实现人工干预的项目，是必须提供的能力。

STC给出了支持这种能力的下位机DFU（Device Firmware Upgrade）源码，

也给出了下位机应用的demo源码。但是上位机的下载程序的源码没有给出，只给出了

基于MFC实现的可执行程序。


这对于了解上位机和下位机的通讯具体过程并不友好。所以我用了一些时间，用IDA将其

反编译到hexray伪代码，并用MFC在VS2012上将其重新实现。

另外原来的demo，需要在特定IO口上置0才能开始下载，这仍然需要手动干预，所以我在下载

的开启部分加入了基于串口输入特定字符的逻辑，这就实现了串口下载demo的完全自动化。

也就是说，上位机点击下载，就可以完成全部下载过程，而不需要任何手工干预。

实现的细节，请参阅源码。


逸霖

